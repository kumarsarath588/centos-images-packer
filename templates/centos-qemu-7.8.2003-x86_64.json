{
  "builders":
  [
    {
      "vm_name": "CentOS-7-x86_64-{{user `full_release`}}",
      "type": "qemu",
      "iso_url": "https://mirrors.edge.kernel.org/centos/7.8.2003/isos/x86_64/CentOS-7-x86_64-Minimal-2003.iso",
      "iso_checksum": "659691c28a0e672558b003d223f83938f254b39875ee7559d1a4a14c79173193",
      "qemuargs": [
        [ "-m", "2048M" ],
        [ "-smp", "cpus=1,maxcpus=16,cores=4" ]
      ],
      "output_directory": "{{user `base_dir`}}/{{user `output_dir`}}",
      "shutdown_command": "sudo -S /usr/sbin/shutdown -h now",
      "disk_size": "51200",
      "format": "qcow2",
      "headless": true,
      "vnc_bind_address": "0.0.0.0",
      "accelerator": "kvm",
      "ssh_username": "{{user `ssh_username`}}",
      "ssh_password": "{{user `ssh_password`}}",
      "ssh_timeout": "20m",
      "net_device": "virtio-net",
      "disk_interface": "virtio",
      "boot_wait": "10s",
      "boot_command": [
        "<tab> text ks=http://10.46.8.152/Users/saratkumar.k/Packer/anaconda-ks-kvm.cfg<enter><wait>"
      ]
    }
  ],
    "provisioners": [{
    "type": "shell",
    "scripts": [
      "scripts/centos-{{user `centos_version`}}/repo.sh",
      "scripts/common/sshd.sh",
      "scripts/centos/locale.sh",
      "scripts/centos-{{user `centos_version`}}/cleanup.sh",
      "scripts/common/minimize.sh"
    ]
  }],
  "variables": {
    "centos_version": "7.8",
    "centos_release": "2003",
    "full_release": "{{env `RELEASE_VERSION`}}",
    "ssh_username": "centos",
    "ssh_password": "nutanix/4u",
    "output_dir": "OUTPUT_DIR",
    "base_dir": "/opt/data/packer"
  }
}
